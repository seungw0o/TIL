# 실행 컨텍스트

## 개요

실행 컨텍스트(Execution Context)는 자바스크립트 코드가 실행되는 환경을 추상화한 개념입니다. 자바스크립트 엔진이 코드를 실행할 때 필요한 정보를 담고 있는 객체라고 할 수 있습니다.

## 실행 컨텍스트의 종류

실행 컨텍스트는 크게 두 가지로 구분됩니다:

- **전역 컨텍스트**: 코드가 처음 실행될 때 생성되며, 전역 스코프를 관리합니다. 프로그램당 하나만 존재합니다.
- **함수 컨텍스트**: 함수가 호출될 때마다 생성되며, 각 함수마다 고유한 컨텍스트를 가집니다.

## 렉시컬 환경 (Lexical Environment)

실행 컨텍스트는 렉시컬 환경과 연결되어 있으며, 렉시컬 환경은 다음 두 가지 구성 요소를 가집니다:

### 1. Environment Record (환경 레코드)

- ES6 이후에 도입된 개념으로, ES6 이전에는 VO(Variable Object, 변수 객체)라고 불렸습니다.
- 현재 스코프 내의 식별자(변수, 함수 등)와 그 값을 저장합니다.
- 전역 렉시컬 환경의 경우 전역에서 선언된 변수와 함수가 포함됩니다.

### 2. Outer Lexical Environment Reference (외부 렉시컬 환경 참조)

- 상위(외부) 렉시컬 환경을 가리킵니다.
- 이를 통해 **스코프 체인**이 형성되어 변수 탐색이 가능합니다.
- 전역 컨텍스트의 경우 `null`을 참조합니다.

## 실행 컨텍스트와 관련된 주요 개념

### 클로저 (Closure)

<a href='./closure.md'>Closure</a>

### 호이스팅 (Hoisting)

호이스팅 또한 실행 컨텍스트의 생성 과정에서 발생하는 현상입니다.

**동작 원리:**

1. 코드 실행 전, 실행 컨텍스트 생성 단계에서 변수와 함수 선언이 Environment Record에 먼저 등록됩니다.
2. 이 때문에 선언문보다 앞에서 변수나 함수를 사용할 수 있습니다.
3. 단, `var`는 선언과 초기화가 동시에 이루어지지만(undefined로), `let`/`const`는 선언만 되고 초기화는 실제 코드 라인에서 이루어집니다 (TDZ, Temporal Dead Zone).

**변수 호이스팅:**

```js
console.log(a); // undefined (var 호이스팅)
var a = 10;

console.log(b); // ReferenceError (TDZ)
let b = 20;
```

**함수 호이스팅:**

```js
// 함수 선언문: 전체가 호이스팅됨
hello(); // "Hello!" (정상 동작)
function hello() {
  console.log("Hello!");
}

// 함수 표현식 (var): 변수만 호이스팅, 함수는 undefined
greet(); // TypeError: greet is not a function
var greet = function () {
  console.log("Greet!");
};

// 함수 표현식 (let/const): TDZ 영향
sayHi(); // ReferenceError: Cannot access 'sayHi' before initialization
const sayHi = function () {
  console.log("Hi!");
};

// 화살표 함수: 함수 표현식과 동일하게 동작
arrow(); // ReferenceError: Cannot access 'arrow' before initialization
const arrow = () => {
  console.log("Arrow!");
};
```

> **주의**: 함수 선언문만 전체가 호이스팅되며, 함수 표현식과 화살표 함수는 변수 호이스팅 규칙을 따릅니다.

## 요약

실행 컨텍스트는 자바스크립트의 스코프, 호이스팅, 클로저 등의 핵심 동작 원리를 이해하는 데 필수적인 개념입니다. 코드가 실행될 때 생성되는 환경으로, 변수와 함수의 생명주기 및 접근성을 관리합니다.
